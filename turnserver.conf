# TURN server configuration for WebRTC
# This file configures coturn TURN server

# Listening ports
listening-port=3478
tls-listening-port=5349

# External IP (will be set via environment variable)
external-ip=${EXTERNAL_IP}

# Realm for authentication
realm=${TURN_REALM:-yourdomain.com}

# Authentication
user=${TURN_USERNAME:-turnuser}:${TURN_PASSWORD:-turnpass}

# Database (optional, using file-based auth for simplicity)
userdb=/etc/turnserverdb

# Logging
log-file=/var/log/turnserver.log
verbose

# Security
no-multicast-peers
no-cli
no-tlsv1
no-tlsv1_1

# Performance
total-quota=100
stale-nonce=600

# Network interfaces
listening-ip=0.0.0.0

# ICE options
ice-lite
no-dtls
no-tls

# Relay options
relay-threading
no-loopback-peers
no-multicast-peers

# Long-term credentials mechanism
lt-cred-mech

# Use fingerprint in TURN message
fingerprint

# Use long-term credential mechanism
use-auth-secret
static-auth-secret=${TURN_SECRET:-your-secret-key}

# Deny access to private IP ranges
denied-peer-ip=0.0.0.0-0.255.255.255
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=169.254.0.0-169.254.255.255
denied-peer-ip=127.0.0.0-127.255.255.255

# Allow access to relay
no-relay

