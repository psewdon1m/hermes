# ๐ TGCall - ะัััััะน ััะฐัั

## ะงัะพ ัะพะทะดะฐะฝะพ

โ **ะะพะปะฝะพัะตะฝะฝะฐั ะฟะปะฐััะพัะผะฐ ะฒะธะดะตะพะทะฒะพะฝะบะพะฒ** ั WebRTC, P2P ัะพะตะดะธะฝะตะฝะธัะผะธ ะธ TURN fallback  
โ **Docker-ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั** ะดะปั ะปะตะณะบะพะณะพ ัะฐะทะฒะตัััะฒะฐะฝะธั  
โ **ะะฝัะตะณัะฐัะธั ั ัััะตััะฒัััะธะผ nginx** (ะฒะฐัะธ ัะตััะธัะธะบะฐัั ัะพััะฐะฝะตะฝั)  
โ **Redis ะดะปั ััะฐะฝะตะฝะธั ัะพััะพัะฝะธั** ะทะฒะพะฝะบะพะฒ  
โ **ะัะฐัะธะฒัะน ัะพะฒัะตะผะตะฝะฝัะน ะธะฝัะตััะตะนั** ั ะบะพะฝััะพะปะฐะผะธ  
โ **ะกะบัะธะฟัั ะดะปั ะณะตะฝะตัะฐัะธะธ ัััะปะพะบ** ะฝะฐ ะทะฒะพะฝะบะธ  

## ๐ฏ ะะฐะบ ะทะฐะฟัััะธัั

### 1. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั
```bash
# ะกะบะพะฟะธัะพะฒะฐัั ัะฐะฑะปะพะฝ .env ัะฐะนะปะฐ
cp .env.example .env

# ะััะตะดะฐะบัะธัะพะฒะฐัั .env ัะฐะนะป ั ะฒะฐัะธะผะธ ะฝะฐัััะพะนะบะฐะผะธ
nano .env  # ะธะปะธ ะปัะฑะพะน ะดััะณะพะน ัะตะดะฐะบัะพั
```

### 2. ะะฐะฟััะบ ัะตัะฒะธัะพะฒ
```bash
# ะะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั
docker-compose up -d
```

## ๐ ะกะพะทะดะฐะฝะธะต ะทะฒะพะฝะบะฐ

ะะพัะปะต ะทะฐะฟััะบะฐ ะธัะฟะพะปัะทัะนัะต ัะบัะธะฟั ะดะปั ัะพะทะดะฐะฝะธั ัััะปะบะธ:

```bash
node scripts/create-call.js
```

## ๐ ะงัะพ ะฝัะถะฝะพ ะฝะฐัััะพะธัั ะฟะตัะตะด ะดะตะฟะปะพะตะผ

### ะะฐัััะพะนะบะฐ .env ัะฐะนะปะฐ
1. **ะะพะผะตะฝ**: ะะฑะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัั `DOMAIN` ะฒ `.env` ัะฐะนะปะต
2. **TURN ัะตัะฒะตั**: ะะฐัััะพะนัะต `TURN_USERNAME`, `TURN_PASSWORD`, `TURN_REALM` ะฒ `.env`
3. **SSL ัะตััะธัะธะบะฐัั**: ะฃะบะฐะถะธัะต ะฟััะธ ะฒ `SSL_CERT_PATH` ะธ `SSL_KEY_PATH`
4. **ะะพััั**: ะัะธ ะฝะตะพะฑัะพะดะธะผะพััะธ ะธะทะผะตะฝะธัะต ะฟะพััั ะฒ `.env` ัะฐะนะปะต

### ะะฐะถะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะฒ .env:
- `DOMAIN` - ะฒะฐั ะดะพะผะตะฝ
- `SERVER_IP` - IP ะฐะดัะตั ัะตัะฒะตัะฐ (38.180.153.25)
- `TURN_USERNAME` / `TURN_PASSWORD` - ััะตัะฝัะต ะดะฐะฝะฝัะต TURN ัะตัะฒะตัะฐ
- `TURN_EXTERNAL_IP` - ะฒะฝะตัะฝะธะน IP ะดะปั TURN ัะตัะฒะตัะฐ (38.180.153.25)
- `SSL_CERT_PATH` / `SSL_KEY_PATH` - ะฟััะธ ะบ ัััะตััะฒัััะธะผ SSL ัะตััะธัะธะบะฐัะฐะผ
- `CALL_TIMEOUT_MINUTES` - ะฒัะตะผั ะถะธะทะฝะธ ะทะฒะพะฝะบะฐ (ะฟะพ ัะผะพะปัะฐะฝะธั 60 ะผะธะฝัั)

**ะัะธะผะตัะฐะฝะธะต**: TURN ัะตัะฒะตั ะธัะฟะพะปัะทัะตั ัะต ะถะต SSL ัะตััะธัะธะบะฐัั, ััะพ ะธ nginx.

## ๐ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ  Frontend   โ    โ  Backend    โ    โ TURN Server โ
โ  (React)    โโโโโบโ  (Node.js)  โโโโโบโ  (coturn)   โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
       โ                   โ                   โ
       โ                   โ                   โ
       โผ                   โผ                   โผ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
โ   Nginx     โ    โ   Redis     โ    โ SSL Certs   โ
โ  (Proxy)    โ    โ (Storage)   โ    โ(Security)   โ
โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโ
```

## ๐ฎ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

1. **ะกะพะทะดะฐะนัะต ะทะฒะพะฝะพะบ**: `node scripts/create-call.js`
2. **ะะพะดะตะปะธัะตัั ัััะปะบะพะน** ั ััะฐััะฝะธะบะพะผ
3. **ะัะบัะพะนัะต ัััะปะบั** ะฒ ะฑัะฐัะทะตัะต
4. **ะะฐะทัะตัะธัะต ะดะพัััะฟ** ะบ ะบะฐะผะตัะต/ะผะธะบัะพัะพะฝั
5. **ะะฐัะปะฐะถะดะฐะนัะตัั ะทะฒะพะฝะบะพะผ!**

## ๐ง ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f

# ะััะฐะฝะพะฒะบะฐ ัะตัะฒะธัะพะฒ
docker-compose down

# ะะตัะตะทะฐะฟััะบ
docker-compose restart

# ะกัะฐััั ัะตัะฒะธัะพะฒ
docker-compose ps
```

## ๐ฑ ะัะพะฑะตะฝะฝะพััะธ

- **P2P ัะพะตะดะธะฝะตะฝะธั** ะดะปั ะปัััะตะน ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- **TURN fallback** ะฟัะธ ะฟัะพะฑะปะตะผะฐั ั NAT
- **ะะฒัะพะพัะธััะบะฐ** ะทะฒะพะฝะบะพะฒ ัะตัะตะท 60 ะผะธะฝัั
- **ะะฐะบัะธะผัะผ 2 ััะฐััะฝะธะบะฐ** ะฝะฐ ะทะฒะพะฝะพะบ
- **ะกะพะฒัะตะผะตะฝะฝัะน UI** ั ะบะพะฝััะพะปะฐะผะธ
- **ะะตะทะพะฟะฐัะฝะพััั** ัะตัะตะท HTTPS ะธ SSL

## ๐ ะัะปะธ ััะพ-ัะพ ะฝะต ัะฐะฑะพัะฐะตั

1. ะัะพะฒะตัััะต ะปะพะณะธ: `docker-compose logs`
2. ะฃะฑะตะดะธัะตัั, ััะพ ะฟะพััั ัะฒะพะฑะพะดะฝั
3. ะัะพะฒะตัััะต SSL ัะตััะธัะธะบะฐัั
4. ะฃะฑะตะดะธัะตัั, ััะพ ะดะพะผะตะฝ ะฝะฐัััะพะตะฝ ะฟัะฐะฒะธะปัะฝะพ

---

**ะะพัะพะฒะพ ะบ ะดะตะฟะปะพั ะฝะฐ ัะตัะฒะตั!** ๐
